import React, { useState } from "react";

// Single-file React component portfolio
// TailwindCSS utility classes assumed available in the host environment.

export default function Portfolio() {
  const [activeExp, setActiveExp] = useState(null);
  const [projectFilter, setProjectFilter] = useState("all");
  const [query, setQuery] = useState("");

  const PROFILE = {
    name: "Your Name",
    title: "Intelligence Research Specialist — Counterterrorism & Homeland Security",
    location: "United States",
    tagline:
      "Analytical, dedicated, and resourceful intelligence professional with 4 years as an Army intelligence analyst and 15 years in federal service.",
    email: "youremail@example.com",
    summary:
      `I am an analytical, dedicated, and resourceful intelligence professional. I served 4 years as an intelligence analyst in the U.S. Army (including a deployment to Iraq), and for 15 years I've worked with the U.S. federal government as an Intelligence Research Specialist focused on threats to the homeland. My work emphasizes motive analysis of illicit actors, mapping smuggling routes (drugs & people), identifying terrorist threats, writing border security reports, and supporting immigration system enforcement. I routinely brief leadership on emerging threats, recommend watchlist additions, pursue DHS training to expand my capabilities, and plan and prioritize security operations based on threat analysis.`,
  };

  const EXPERIENCES = [
    {
      id: 1,
      role: "Intelligence Research Specialist — Federal Government",
      org: "U.S. Federal Government",
      range: "2009 — Present",
      bullets: [
        "Analyzed threats to the homeland; identified motives and intent of illicit actors.",
        "Mapped smuggling routes and logistical networks for narcotics and human smuggling.",
        "Wrote actionable reports on border security and assisted policy-focused analyses for immigration systems and enforcement.",
        "Briefed senior leadership regularly on emerging threats and recommended individuals for watchlists.",
        "Sought and completed DHS training courses to expand skills in TTP analysis, strategic planning, and operational execution.",
      ],
      keywords: ["Counterterrorism", "Smuggling Routes", "Border Security", "Watchlists", "DHS Training"],
    },
    {
      id: 2,
      role: "Intelligence Analyst — U.S. Army",
      org: "U.S. Army",
      range: "2005 — 2009",
      bullets: [
        "Deployed to Iraq; conducted tactical and strategic intelligence analysis in a complex operational environment.",
        "Prepared and delivered briefings for command on immediate threats and operational risk.",
        "Produced timely intelligence products feeding joint operations and force protection decisions.",
      ],
      keywords: ["Military Intelligence", "Deployment", "Briefings", "Risk Analysis"],
    },
  ];

  const PROJECTS = [
    {
      id: "p1",
      title: "Smuggling Route Map & Analysis",
      summary:
        "Interactive case study dissecting transnational smuggling routes — route identification, nodes, and choke points — with recommended operational priorities.",
      tags: ["Analysis", "Smuggling", "Operational Recommendations"],
    },
    {
      id: "p2",
      title: "Watchlist Recommendation Workflow",
      summary:
        "Process design and sample deliverable showing how indicators, source reliability, and motive analysis feed watchlist recommendations for leadership review.",
      tags: ["Watchlists", "Reporting", "Process"],
    },
    {
      id: "p3",
      title: "Border Security Policy Brief",
      summary:
        "Written brief outlining policy options to secure the U.S. border, risk tradeoffs, and operational steps to improve enforcement while supporting legal immigration flows.",
      tags: ["Border Security", "Policy", "Reports"],
    },
  ];

  function downloadResume() {
    const text = `${PROFILE.name} - Resume\n\n${PROFILE.title}\n\nSummary:\n${PROFILE.summary}\n\nExperience:\n${EXPERIENCES.map(
      (e) => `- ${e.role} at ${e.org} (${e.range})\n` + e.bullets.map((b) => `  • ${b}\n`).join("")
    ).join("\n")}`;
    const blob = new Blob([text], { type: "text/plain" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = `${PROFILE.name.replace(/\s+/g, "_")}_Resume.txt`;
    a.click();
    URL.revokeObjectURL(url);
  }

  const filteredProjects = PROJECTS.filter((p) => {
    if (projectFilter !== "all" && !p.tags.includes(projectFilter)) return false;
    if (query && !(`${p.title} ${p.summary}`.toLowerCase().includes(query.toLowerCase()))) return false;
    return true;
  });

  return (
    <div className="min-h-screen bg-gray-50 text-gray-900 p-6 md:p-12">
      <header className="max-w-5xl mx-auto flex flex-col md:flex-row items-start md:items-center gap-6">
        <div className="flex-shrink-0 w-28 h-28 rounded-xl bg-gradient-to-br from-slate-800 to-slate-600 flex items-center justify-center text-white text-xl font-bold">
          {PROFILE.name.split(" ")
            .map((n) => n[0])
            .slice(0, 2)
            .join("")}
        </div>
        <div className="flex-1">
          <h1 className="text-3xl md:text-4xl font-extrabold">{PROFILE.name}</h1>
          <p className="text-sm text-slate-600 mt-1">{PROFILE.title} • {PROFILE.location}</p>
          <p className="mt-4 max-w-2xl">{PROFILE.tagline}</p>
          <div className="mt-4 flex gap-3">
            <button onClick={downloadResume} className="px-4 py-2 bg-slate-800 text-white rounded-md shadow">Download Resume</button>
            <a className="px-4 py-2 border rounded-md" href={`mailto:${PROFILE.email}?subject=Opportunity`}>
              Contact
            </a>
          </div>
        </div>
      </header>

      <main className="max-w-5xl mx-auto mt-10 grid grid-cols-1 md:grid-cols-3 gap-8">
        <section className="md:col-span-2 bg-white p-6 rounded-2xl shadow">
          <h2 className="text-xl font-bold mb-3">About</h2>
          <p className="text-slate-700 whitespace-pre-wrap">{PROFILE.summary}</p>

          <div className="mt-6">
            <h3 className="font-semibold">Core strengths</h3>
            <ul className="mt-2 grid grid-cols-2 gap-2">
              <li className="p-3 border rounded">Counterterrorism Analysis</li>
              <li className="p-3 border rounded">Smuggling & Network Mapping</li>
              <li className="p-3 border rounded">Operational Reporting & Briefing</li>
              <li className="p-3 border rounded">Strategic Planning & Prioritization</li>
              <li className="p-3 border rounded">Watchlist & Target Assessment</li>
              <li className="p-3 border rounded">DHS Training & Continuous Learning</li>
            </ul>
          </div>

          <div className="mt-6">
            <h3 className="font-semibold">Interactive timeline</h3>
            <div className="mt-4 space-y-4">
              {EXPERIENCES.map((exp) => (
                <button
                  key={exp.id}
                  onClick={() => setActiveExp(exp)}
                  className="w-full text-left p-4 border rounded hover:bg-slate-50 flex justify-between items-center"
                >
                  <div>
                    <div className="font-medium">{exp.role}</div>
                    <div className="text-sm text-slate-500">{exp.org} • {exp.range}</div>
                  </div>
                  <div className="text-slate-400">View</div>
                </button>
              ))}
            </div>

            {activeExp && (
              <div className="mt-6 p-4 bg-slate-50 border rounded">
                <div className="flex justify-between items-start">
                  <div>
                    <h4 className="font-bold">{activeExp.role}</h4>
                    <div className="text-sm text-slate-500">{activeExp.org} • {activeExp.range}</div>
                  </div>
                  <button className="text-sm text-slate-600" onClick={() => setActiveExp(null)}>Close</button>
                </div>
                <ul className="mt-3 list-disc pl-5 text-slate-700">
                  {activeExp.bullets.map((b, i) => (
                    <li key={i} className="mb-1">{b}</li>
                  ))}
                </ul>
                <div className="mt-3 text-xs text-slate-500">Keywords: {activeExp.keywords.join(", ")}</div>
              </div>
            )}

          </div>
        </section>

        <aside className="bg-white p-6 rounded-2xl shadow">
          <h2 className="text-lg font-bold">Skills & Speaking</h2>
          <p className="mt-2 text-slate-700">Strong briefing skills — frequent presenter to leadership on emerging threats and watchlist recommendations. Comfortable producing concise, actionable reports for decision-makers.</p>

          <div className="mt-4">
            <h3 className="font-semibold">Technical & Analytical</h3>
            <ul className="mt-2 space-y-2 text-sm text-slate-700">
              <li>Open-source & classified synthesis</li>
              <li>Network analysis & geospatial tradecraft</li>
              <li>Strategic planning & mission execution</li>
              <li>Threat prioritization & risk assessment</li>
            </ul>
          </div>

          <div className="mt-4">
            <h3 className="font-semibold">Continuous Training</h3>
            <p className="text-sm text-slate-700 mt-2">Actively seeks DHS and related professional development to stay current on TTPs, intelligence tradecraft, and leadership planning.</p>
          </div>

          <div className="mt-6">
            <h3 className="font-semibold">Quick contact</h3>
            <a href={`mailto:${PROFILE.email}`} className="block mt-2 px-3 py-2 border rounded">{PROFILE.email}</a>
          </div>
        </aside>

        <section className="md:col-span-3 bg-white p-6 rounded-2xl shadow">
          <div className="flex flex-col md:flex-row justify-between items-center gap-4">
            <h2 className="text-xl font-bold">Projects & Case Studies</h2>
            <div className="flex gap-2 items-center">
              <input
                value={query}
                onChange={(e) => setQuery(e.target.value)}
                placeholder="Search projects..."
                className="px-3 py-2 border rounded"
              />
              <select className="px-3 py-2 border rounded" onChange={(e) => setProjectFilter(e.target.value)} value={projectFilter}>
                <option value="all">All</option>
                <option value="Analysis">Analysis</option>
                <option value="Smuggling">Smuggling</option>
                <option value="Watchlists">Watchlists</option>
                <option value="Border Security">Border Security</option>
                <option value="Policy">Policy</option>
                <option value="Reporting">Reporting</option>
              </select>
            </div>
          </div>

          <div className="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
            {filteredProjects.length ? (
              filteredProjects.map((p) => (
                <article key={p.id} className="p-4 border rounded hover:shadow">
                  <h3 className="font-semibold">{p.title}</h3>
                  <p className="text-sm mt-2 text-slate-700">{p.summary}</p>
                  <div className="mt-3 flex flex-wrap gap-2 text-xs">
                    {p.tags.map((t) => (
                      <span key={t} className="px-2 py-1 border rounded">{t}</span>
                    ))}
                  </div>
                  <div className="mt-3">
                    <button
                      onClick={() => alert(`${p.title} — Open the portfolio canvas to attach or expand this case study.`)}
                      className="px-3 py-2 border rounded text-sm"
                    >
                      Open Case Study
                    </button>
                  </div>
                </article>
              ))
            ) : (
              <div className="md:col-span-3 text-slate-500">No projects match your filters or search.</div>
            )}
          </div>
        </section>

        <section className="md:col-span-3 bg-white p-6 rounded-2xl shadow">
          <h2 className="text-xl font-bold">Let’s collaborate</h2>
          <p className="mt-2 text-slate-700">If you’d like a version of this portfolio hosted online (static site or Netlify/Vercel deploy), or want help tailoring it for a specific job posting, I can produce an exportable package and a tailored pitch for hiring managers.</p>
          <div className="mt-4 flex gap-3">
            <a className="px-4 py-2 bg-slate-800 text-white rounded-md" href={`mailto:${PROFILE.email}?subject=Portfolio Inquiry`}>Email to discuss</a>
            <button onClick={() => alert('To publish: export this React file to a project and deploy to Vercel/Netlify. I can generate a ready-to-deploy package on request.')} className="px-4 py-2 border rounded">How to publish</button>
          </div>
        </section>
      </main>

      <footer className="max-w-5xl mx-auto mt-10 text-center text-slate-500 text-sm">Built for hiring: highlight the decision-makers, timeline, and the mission impact of your work.</footer>
    </div>
  );
}
